{% extends "base.html" %}

{% block title %}Completed Tasks - Casey{% endblock %}

{% block content %}
<div style="max-width: 600px;">
    <a href="/" class="back-link">
        <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M10 12L6 8l4-4"/></svg>
        Back to Today
    </a>

    <h1 class="page-title">Completed Tasks</h1>
    <p class="page-desc">{{ total }} task{{ 's' if total != 1 }} completed</p>

    <div class="card">
        {% if tasks %}
            <ul class="task-list">
                {% for task in tasks %}
                    <li class="task-item completed">
                        <form method="POST" action="/tasks/{{ task.id }}/toggle" style="display: flex; align-items: center; flex: 1; margin: 0;">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                            <input type="checkbox" checked onchange="this.form.submit()">
                            <span style="flex: 1; font-size: 14px;">
                                <a href="/tasks/{{ task.id }}/edit" style="color: inherit; text-decoration: none;">{{ task.title }}</a>
                            </span>
                        </form>
                        <span style="font-size: 11px; color: var(--ink-muted); white-space: nowrap;">
                            {{ task.completed_at | uk_date if task.completed_at else '' }}
                        </span>
                    </li>
                {% endfor %}
            </ul>

            {% if has_more or page > 1 %}
            <div style="display: flex; justify-content: space-between; padding-top: 1rem; border-top: 1px solid var(--border-light); margin-top: 0.5rem;">
                {% if page > 1 %}
                    <a href="/completed-tasks?page={{ page - 1 }}" style="font-size: 13px; color: var(--clay); text-decoration: none;">&larr; Newer</a>
                {% else %}
                    <span></span>
                {% endif %}
                {% if has_more %}
                    <a href="/completed-tasks?page={{ page + 1 }}" style="font-size: 13px; color: var(--clay); text-decoration: none;">Older &rarr;</a>
                {% endif %}
            </div>
            {% endif %}
        {% else %}
            <div class="empty-state" style="padding: 1.5rem 1rem;">
                No completed tasks yet
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}
